diff -urN -x CYGWIN-PATCHES -x 'aclocal.m4~' -x aclocal.m4t -x autom4te.cache -x config.cache -x config.log -x config.status -x config.h -x '*config.h.in' -x ABOUT-NLS -x Makefile.in.in -x Makevars.template -x '*SlackBuild*' -x '*.egg-info' -x '*.class' -x '*.pyc' -x '*.mo' -x '*.gmo' -x '*.orig' -x '*.rej' -x '*.spec' -x '*.temp' -x '*~' -x '*.stackdump' -x COPYING -x INSTALL -x compile -x config-ml.in -x config.guess -x config.sub -x depcomp -x elisp-comp -x install-sh -x libtool.m4 -x ltoptions.m4 -x ltsugar.m4 -x ltversion.m4 -x 'lt~obsolete.m4' -x ltmain.sh -x mdate-sh -x missing -x mkinstalldirs -x py-compile -x symlink-tree -x texinfo.tex -x ylwrap -x config.rpath -x aclocal.m4 -x Makefile.in -x makefile.in -x configure -x omf.make -x xmldocs.make -x gnome-doc-utils.make -x gnome-doc-utils.m4 -x intltool.m4 -x intltool-extract -x intltool-extract.in -x intltool-merge -x intltool-merge.in -x intltool-update -x intltool-update.in origsrc/genius-1.0.3/configure.in src/genius-1.0.3/configure.in
--- origsrc/genius-1.0.3/configure.in	2008-02-22 02:11:30.000000000 -0600
+++ src/genius-1.0.3/configure.in	2008-06-17 00:30:30.671875000 -0500
@@ -152,8 +152,8 @@
   VICIOUS_UI_LIBS="libviciousui.a"
   GTKEXTRA_LIBS="libgtkextra-genius.a"
   
-  GNOME_GENIUS=gnome-genius
-  GENIUS_READLINE_HELPER_FIFO=genius-readline-helper-fifo
+  GNOME_GENIUS='gnome-genius$(EXEEXT)'
+  GENIUS_READLINE_HELPER_FIFO='genius-readline-helper-fifo$(EXEEXT)'
   GNOME_GENIUS_DESKTOP_IN="gnome-genius.desktop.in"
 
 else
diff -urN -x CYGWIN-PATCHES -x 'aclocal.m4~' -x aclocal.m4t -x autom4te.cache -x config.cache -x config.log -x config.status -x config.h -x '*config.h.in' -x ABOUT-NLS -x Makefile.in.in -x Makevars.template -x '*SlackBuild*' -x '*.egg-info' -x '*.class' -x '*.pyc' -x '*.mo' -x '*.gmo' -x '*.orig' -x '*.rej' -x '*.spec' -x '*.temp' -x '*~' -x '*.stackdump' -x COPYING -x INSTALL -x compile -x config-ml.in -x config.guess -x config.sub -x depcomp -x elisp-comp -x install-sh -x libtool.m4 -x ltoptions.m4 -x ltsugar.m4 -x ltversion.m4 -x 'lt~obsolete.m4' -x ltmain.sh -x mdate-sh -x missing -x mkinstalldirs -x py-compile -x symlink-tree -x texinfo.tex -x ylwrap -x config.rpath -x aclocal.m4 -x Makefile.in -x makefile.in -x configure -x omf.make -x xmldocs.make -x gnome-doc-utils.make -x gnome-doc-utils.m4 -x intltool.m4 -x intltool-extract -x intltool-extract.in -x intltool-merge -x intltool-merge.in -x intltool-update -x intltool-update.in origsrc/genius-1.0.3/src/Makefile.am src/genius-1.0.3/src/Makefile.am
--- origsrc/genius-1.0.3/src/Makefile.am	2008-05-19 23:53:33.000000000 -0500
+++ src/genius-1.0.3/src/Makefile.am	2008-06-17 01:45:29.578125000 -0500
@@ -165,6 +165,8 @@
 	geloutput.h	\
 	funclibhelper.cP
 
+genius_LDFLAGS = -Wl,--export-all-symbols,--out-implib,libgenius.a
+
 genius_LDADD = \
 	$(top_builddir)/ve/libvicious.a		\
 	-lm					\
@@ -193,7 +195,9 @@
 
 plugin_LTLIBRARIES = libtestplugin.la
 
-libtestplugin_la_LDFLAGS = -module -avoid-version
+libtestplugin_la_DEPENDENCIES = genius$(EXEEXT)
+libtestplugin_la_LDFLAGS = -module -avoid-version -no-undefined -rpath $(pkglibdir) -Wl,libgenius.a
+libtestplugin_la_LIBADD = $(INTLLIBS)
 
 libtestplugin_la_SOURCES =	\
 	plug_api.h		\
@@ -238,3 +242,6 @@
 	sed -e 's,\@libdir\@,$(libdir),g' < $(srcdir)/test.plugin.in \
 	  > test.plugin.tmp && mv -f test.plugin.tmp test.plugin
 
+install-exec-hook:
+	$(mkinstalldirs) $(DESTDIR)$(libdir)
+	$(INSTALL_DATA) libgenius.a $(DESTDIR)$(libdir)
diff -urN -x CYGWIN-PATCHES -x 'aclocal.m4~' -x aclocal.m4t -x autom4te.cache -x config.cache -x config.log -x config.status -x config.h -x '*config.h.in' -x ABOUT-NLS -x Makefile.in.in -x Makevars.template -x '*SlackBuild*' -x '*.egg-info' -x '*.class' -x '*.pyc' -x '*.mo' -x '*.gmo' -x '*.orig' -x '*.rej' -x '*.spec' -x '*.temp' -x '*~' -x '*.stackdump' -x COPYING -x INSTALL -x compile -x config-ml.in -x config.guess -x config.sub -x depcomp -x elisp-comp -x install-sh -x libtool.m4 -x ltoptions.m4 -x ltsugar.m4 -x ltversion.m4 -x 'lt~obsolete.m4' -x ltmain.sh -x mdate-sh -x missing -x mkinstalldirs -x py-compile -x symlink-tree -x texinfo.tex -x ylwrap -x config.rpath -x aclocal.m4 -x Makefile.in -x makefile.in -x configure -x omf.make -x xmldocs.make -x gnome-doc-utils.make -x gnome-doc-utils.m4 -x intltool.m4 -x intltool-extract -x intltool-extract.in -x intltool-merge -x intltool-merge.in -x intltool-update -x intltool-update.in origsrc/genius-1.0.3/ve/Makefile.am src/genius-1.0.3/ve/Makefile.am
--- origsrc/genius-1.0.3/ve/Makefile.am	2007-11-17 21:25:58.000000000 -0600
+++ src/genius-1.0.3/ve/Makefile.am	2008-06-17 00:29:01.890625000 -0500
@@ -45,7 +45,7 @@
 	test-ve-config.c
 
 test_ve_config_LDADD = \
-	$(top_builddir)/ve/libvicious.a		\
+	libvicious.a		\
 	$(VICIOUS_LIBS)				\
 	$(INTLLIBS)				\
 	$(GLIB_LIBS)
